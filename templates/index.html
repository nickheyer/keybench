<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeyBench - Cryptographic Key Generation Benchmark</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>KeyBench</h1>
            <p>Cryptographic Key Generation Benchmark Tool</p>
        </header>

        <div class="system-info" id="systemInfo">
            <h2>System Information</h2>
            <div class="loading">Loading...</div>
        </div>

        <div class="benchmark-config">
            <h2>Configure Benchmark</h2>
            <form id="benchmarkForm">
                <div class="form-group">
                    <label>Algorithms:</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" name="algorithms" value="rsa" checked> RSA</label>
                        <label><input type="checkbox" name="algorithms" value="rsa-parallel"> RSA (Multi-core)</label>
                        <label><input type="checkbox" name="algorithms" value="ecdsa"> ECDSA</label>
                        <label><input type="checkbox" name="algorithms" value="ed25519"> Ed25519</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="keySizes">Key Sizes (comma-separated):</label>
                    <input type="text" id="keySizes" name="keySizes" value="2048,4096" placeholder="e.g., 2048,4096,32768,65536,131072">
                    <small>RSA: Any size up to system limits (≥8192 bits stored to disk), ECDSA: 224/256/384/521, Ed25519: 256</small>
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="fileStorage" name="fileStorage"> 
                        Force file storage for all keys
                    </label>
                    <small>Automatically enabled for RSA ≥ 8192 bits</small>
                </div>

                <div class="form-group">
                    <label for="iterations">Iterations:</label>
                    <input type="number" id="iterations" name="iterations" value="10" min="1" max="1000">
                </div>

                <div class="form-group">
                    <label for="parallel">Concurrent Keys:</label>
                    <input type="number" id="parallel" name="parallel" value="1" min="1" max="32">
                    <small>Number of keys to generate simultaneously. Each key uses one CPU core.<br>
                    Example: 8 concurrent keys = generate 8 keys at once using 8 cores</small>
                </div>

                <div class="form-group">
                    <label for="workers">Worker Threads:</label>
                    <input type="number" id="workers" name="workers" value="1" min="1">
                    <small>Number of background worker threads in the pool (default: 1)</small>
                </div>

                <div class="form-group">
                    <label for="timeout">Timeout (seconds):</label>
                    <input type="number" id="timeout" name="timeout" value="300" min="-1">
                </div>

                <button type="submit" class="btn btn-primary">Start Benchmark</button>
            </form>
        </div>

        <div class="benchmark-progress" id="benchmarkProgress" style="display: none;">
            <h2>Benchmark Progress</h2>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="progress-info" id="progressInfo"></div>
            <button class="btn btn-danger" id="terminateBtn" onclick="terminateBenchmark()">Terminate Benchmark</button>
        </div>

        <div class="results-section" id="resultsSection" style="display: none;">
            <h2>Benchmark Results</h2>
            <div id="results"></div>
        </div>

        <div class="keys-section">
            <h2>Generated Keys</h2>
            <div class="keys-controls">
                <button class="btn btn-secondary" onclick="refreshKeys()">Refresh</button>
                <button class="btn btn-danger" onclick="clearAllKeys()">Clear All</button>
            </div>
            <div id="keysList" class="keys-list"></div>
            <div class="file-cleanup-status" id="fileCleanupStatus">
                <small>Files older than 30 minutes are automatically cleaned up</small>
            </div>
        </div>

        <div class="history-section">
            <h2>Benchmark History</h2>
            <div id="benchmarkHistory"></div>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
    <script src="/static/js/keysUI.js"></script>
</body>
</html>